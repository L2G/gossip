---
layout: site
title: Scripts
---
				<div id="inlineTOC">
				  <ul>
				    <li><a href="starting-to-use.html">Getting started</a></li>
				    <ul>
				      <li><a href="starting-to-use.html#definitions">Three important words</a></li>
				      <li><a href="starting-to-use.html#config">Your own private configuration</a></li>
				    </ul>
				    <li><a href="cronies.html">All cronies</a></li>
				    <ul>
				      <li><a href="cronies.html#campfire">campfire</a></li>
				      <li><a href="cronies.html#jabber">jabber</a></li>
				      <li><a href="cronies.html#mail">mail</a></li>
				      <li><a href="cronies.html#stdout">standard output</a></li>
				      <li><a href="cronies.html#trac">trac</a></li>
				      <li><a href="cronies.html#twitter">twitter</a></li>
				    </ul>
				    <li><a href="scripts.html">All scripts</a></li>
				    <ul>
				      <li><a href="scripts.html#fanout">fanout: broadcast a message</a></li>
				      <li><a href="scripts.html#watchdog">watchdog: report on a script</a></li>
				      <li><a href="scripts.html#svntell">svntell: Subversion post-commit</a></li>
				    </ul>
				  </ul>
				</div>
				<h2>The different scripts</h2>
				
				<ul>
					<li>
						<p>
							<strong><a href="#fanout">fanout</a></strong> sends the scandal and details to the desired cronies.
						</p>
					</li>
					<li>
						<p>
							<strong><a href="#svntell">svntell</a></strong> is intended to be called from a Subversion post-commit hook. It sends out information about the most recent revision.
						</p>
					</li>
					<li>
						<p>
							<strong><a href="#watchdog.html">watchdog</a></strong> is given a command to run. It does so, then reports on the command's output and how long it took.
						</p>
					</li>
				</ul>

				<h2><a name="fanout">fanout</a></h2>
				<p>
					<code>fanout</code> gets the scandal from its command-line arguments and the details from standard input. In the following, what you type is shown in bold:
				</p>
				<pre>
	<b>$ ruby -S fanout this is a scandal
	Here are some details.</b>
	  this is a scandal
	  Here are some details.
</pre>
				
				<p>
					(The output is indented because that's how the standard output crony prints.) 
				</p>
				
				<p>
					Often, you want to send only a single line. In that case, the way <code>fanout</code> waits for input is annoying. You can turn that off with the <code>--no-details</code> option:
				</p>
				
<pre>
<b>$ ruby -S fanout --no-det fred is on fire!</b>
	  fred is on fire!
</pre>	
	
	<h2><a name="watchdog">watchdog</a></h2>
	
	<code>watchdog</code> is given a command. It executes it, then gossips about the results. Here's a typical use:
<pre>
<b> 	  $ ruby -S watchdog rake test</b>
	  Program rake finished.
	  Duration: 20.822008 seconds.
	  Command: rake test
	  Output:
	    (in /Users/marick/src/publish/user-choices)
	    Loaded suite
	    Started       
	    ................................................................................
	    Finished in 19.897866 seconds.

	    137 tests, 334 assertions, 0 failures, 0 errors
</pre>

	<p>
		<code>watchdog</code> has no configurable options of its own.
	</p>
	<p>
		Note: The command that <code>watchdog</code> runs can have command-line arguments of its own, like this:
	</p>
	
	<pre>
	<b>$ ruby -S watchdog rake --tasks</b>
	</pre>
				<h2><a name="svntell">svntell</a></h2>
				
				<p>
					<code>svntell</code> reads information about a revision from a Subversion repository and gossips about it. Both the revision number and repository path are required:
				</p>
<pre><b>
	  ruby -S svntell --repo=/Users/marick/svn --revision=3</b>
	  commit by marick
	  [marick] Revision 3 Committed by marick:
	   - Added starting set of third-party jars

	  Changed Files:
	  - A   clinics/trunk/jars/fitLibraryForFit.jar
	  - A   clinics/trunk/jars/javaFit1.1b.jar
	  - A   clinics/trunk/jars/junit-addons-1.4.jar
	  - A   clinics/trunk/jars/junit.jar</pre>

	<p>
		<code>svntell</code> is usually used within a Subversion post-commit hook script, which passes it the two facts it needs. 
		</p>
		
	<p>
		<code>svntell</code> uses the <code>svnlook</code> command, which is installed along with the rest of the Subversion client commands. Because <code>svntell</code> is called by the Subversion server, whose search <code>$PATH</code> is unknown, it uses an absolute path to <code>svnlook</code>. By default, that path is <code>/usr/bin/svntell</code>. You can change it with the <code>--svnlook-path</code> option:
	</p>
	
<pre>
	<b>$ ruby -S svntell --svnlook-path /opt/local/bin/svnlook --repo=/svn --revision=3</b>
</pre>

<p style="text-align: center">
	<a href="scripts.html">Next</a>: all cronies.
</p>
